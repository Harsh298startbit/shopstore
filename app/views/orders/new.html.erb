<div class="hero-wrap hero-bread" style="background-image: url('<%= asset_path("bg_1.jpg") %>');">
  <div class="container">
    <div class="row no-gutters slider-text align-items-center justify-content-center">
      <div class="col-md-9 ftco-animate text-center">
        <p class="breadcrumbs"><span class="mr-2"><%= link_to "Home", root_path %></span> <span>Checkout</span></p>
        <h1 class="mb-0 bread">Checkout</h1>
      </div>
    </div>
  </div>
</div>

<section class="ftco-section">
  <div class="container">
    <%= form_with model: @order, url: orders_path, class: "row justify-content-center" do |f| %>
      <div class="col-xl-7 ftco-animate">
        <%= f.hidden_field :user_id, value: current_user.id %>
        
        <div class="billing-form">
          <h3 class="mb-4 billing-heading">Shipping Information</h3>
          <div class="row align-items-end">
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :shipping_name, "Full Name" %>
                <%= f.text_field :shipping_name, class: "form-control", placeholder: "Enter your full name", required: true, value: current_user.name %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :email, "Email Address" %>
                <%= f.email_field :email, class: "form-control", placeholder: "Enter your email", required: true, value: current_user.email %>
              </div>
            </div>
            <div class="w-100"></div>
            
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :phone, "Phone Number" %>
                <%= f.telephone_field :phone, class: "form-control", placeholder: "Enter your phone number", required: true %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :shipping_country, "Country" %>
                <div class="select-wrap">
                  <div class="icon"><span class="ion-ios-arrow-down"></span></div>
                  <%= f.select :shipping_country, 
                      options_for_select([
                        ['India', 'India'],
                        ['United States', 'United States'],
                        ['United Kingdom', 'United Kingdom'],
                        ['Canada', 'Canada'],
                        ['Australia', 'Australia']
                      ], 'India'), 
                      {}, 
                      { class: "form-control", required: true } %>
                </div>
              </div>
            </div>
            <div class="w-100"></div>
            
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :shipping_address, "Street Address" %>
                <%= f.text_field :shipping_address, class: "form-control", placeholder: "House number and street name", required: true %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <%= f.text_field :shipping_address_line2, class: "form-control", placeholder: "Apartment, suite, unit etc: (optional)" %>
              </div>
            </div>
            <div class="w-100"></div>
            
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :shipping_city, "Town / City" %>
                <%= f.text_field :shipping_city, class: "form-control", placeholder: "Enter city", required: true %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :shipping_state, "State / Province" %>
                <%= f.text_field :shipping_state, class: "form-control", placeholder: "Enter state" %>
              </div>
            </div>
            <div class="w-100"></div>
            
            <div class="col-md-6">
              <div class="form-group">
                <%= f.label :shipping_zip, "Postcode / ZIP *" %>
                <%= f.text_field :shipping_zip, class: "form-control", placeholder: "Enter postcode", required: true %>
              </div>
            </div>
            <div class="w-100"></div>
            
            <div class="col-md-12">
              <div class="form-group mt-4">
                <div class="radio">
                  <label class="mr-3">
                    <input type="checkbox" name="create_account"> Create an Account?
                  </label>
                  <label>
                    <input type="checkbox" name="save_address"> Save this address for future orders
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-xl-5">
        <div class="row mt-5 pt-3">
          <div class="col-md-12 d-flex mb-5">
            <div class="cart-detail cart-total p-3 p-md-4">
              <h3 class="billing-heading mb-4">Order Summary</h3>
              
              <% @cart.cart_items.each do |item| %>
                <div class="mb-3 pb-3" style="border-bottom: 1px solid #f0f0f0;">
                  <div class="d-flex justify-content-between">
                    <div>
                      <p class="mb-1"><strong><%= item.product.name %></strong></p>
                      <p class="mb-1 text-muted" style="font-size: 13px;">
                        <%= item.product_variant.variant_type %>: <%= item.product_variant.value %>
                      </p>
                      <p class="mb-0 text-muted" style="font-size: 13px;">Qty: <%= item.quantity %></p>
                    </div>
                    <div class="text-right">
                      <p class="mb-0"><strong>₹<%= number_with_precision(item.product_variant.price * item.quantity, precision: 2) %></strong></p>
                    </div>
                  </div>
                </div>
              <% end %>
              
              <p class="d-flex mt-4">
                <span>Subtotal</span>
                <span>₹<%= number_with_precision(@total, precision: 2) %></span>
              </p>
              <p class="d-flex">
                <span>Delivery</span>
                <span>Free</span>
              </p>
              <p class="d-flex">
                <span>Discount</span>
                <span>₹0.00</span>
              </p>
              <hr>
              <p class="d-flex total-price">
                <span>Total</span>
                <span>₹<%= number_with_precision(@total, precision: 2) %></span>
              </p>
            </div>
          </div>
          
          <div class="col-md-12">
            <div class="cart-detail p-3 p-md-4">
              <h3 class="billing-heading mb-4">Payment Method</h3>
              
              <div class="form-group">
                <div class="col-md-12">
                  <div class="radio">
                    <label>
                      <input type="radio" name="payment_method" class="mr-2" value="stripe" checked> 
                      Credit / Debit Card (Stripe)
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <div class="col-md-12">
                  <div class="radio">
                    <label>
                      <input type="radio" name="payment_method" class="mr-2" value="cod"> 
                      Cash on Delivery
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <div class="col-md-12">
                  <div class="radio">
                    <label>
                      <input type="radio" name="payment_method" class="mr-2" value="bank"> 
                      Direct Bank Transfer
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="form-group">
                <div class="col-md-12">
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" value="" class="mr-2" required> 
                      I have read and accept the terms and conditions
                    </label>
                  </div>
                </div>
              </div>
              
              <p>
                <%= f.submit "Proceed to Payment", class: "btn btn-primary py-3 px-4" %>
              </p>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</section>



<style>
  .cart-detail {
    background: #fff;
    width: 100%;
    border: 1px solid rgba(0,0,0,0.05);
  }

  .cart-total p {
    margin-bottom: 15px;
  }

  .cart-total p span:last-child {
    font-weight: 600;
  }

  .total-price {
    font-size: 20px;
    font-weight: 700 !important;
  }

  .total-price span {
    font-weight: 700 !important;
  }

  .select-wrap {
    position: relative;
  }

  .select-wrap .icon {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    color: #999;
    pointer-events: none;
  }

  .select-wrap select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
  }
</style>